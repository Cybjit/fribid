<html>
<head>
<title>BankID test</title>
<script type="text/javascript">

var output;
var pluginVersion;

function init() {
    output = document.getElementById('output');
    pluginVersion = document.getElementById('pluginVersion');
    output.value = "";
    output.value += "Version: >";
    output.value += pluginVersion.GetVersion()+"<\n\n";
    
    pluginAuth = document.getElementById('pluginAuth');
    output.value += "Calling SetParam(Challenge)\n";
    pluginAuth.SetParam("Challenge", "MTI0MzYwMTMyOTk5NTU3MTI4OTg0MjkwMzY3OTYwODM=");
    output.value += "Calling SetParam(Policys)\n";
    var retval = pluginAuth.SetParam("Policys", "MS4yLjc1Mi43OC4xLjE7MS4yLjc1Mi43OC4xLjI7MS4yLjMuNC41OzEuMi4zLjQuMTA=");
    
    output.value += "retval of sp = "+retval+"\n";
    output.value += "\nGetParam:\n";
    output.value += "    Challenge: >"+pluginAuth.GetParam("Challenge")+"<\n";
    output.value += "    Policys: >"+pluginAuth.GetParam("Policys")+"<\n";
    output.value += "    Signature: >"+pluginAuth.GetParam("Signature")+"<\n";
    
    output.value += "\nInvoking PerformAction(Authenticate):\n";
    output.value += "    return value = "+pluginAuth.PerformAction("Authenticate")+"\n";
    output.value += "    GetLastError() = "+pluginAuth.GetLastError()+"\n";
    
    output.value += "\nGetParam:\n";
    output.value += "    Signature: >"+pluginAuth.GetParam("Signature")+"<\n";
}

</script>
</head>
<body onload="init()" style="background: #FFFFDD">
<p> Plugin installerad: 
<script type="text/javascript">
var pluginInstalled = false;

var pluginInstalled = 
   (navigator.mimeTypes &&
    navigator.mimeTypes["application/x-personal-version"] &&
    navigator.mimeTypes["application/x-personal-version"].enabledPlugin);

document.write(pluginInstalled ? "Ja" : "Nej");
</script>
</p>

<div>
<textarea cols="80" rows="30" id="output">
</textarea>
</div>

<div>
<object id="pluginVersion" type="application/x-personal-version"></object>
<object id="pluginAuth" type="application/x-personal-authentication"></object>
</div>

</body>
</html>



